(this["webpackJsonpgreetly-coding-challenge"]=this["webpackJsonpgreetly-coding-challenge"]||[]).push([[0],{126:function(e,n,t){"use strict";t.r(n);var r,a=t(16),c=t.n(a),i=t(0),o=t(30),u=t(170),s=t(92),l=t(40),b=t(164),d=t(165),j=t(166),O=t(159),f=t(163),g=t(167),p=t(172),h=t(9),m=function(e){var n=e.country;return Object(h.jsxs)(O.a,{children:[Object(h.jsx)(f.a,{children:n.name}),Object(h.jsx)(f.a,{children:n.region}),Object(h.jsx)(f.a,{children:n.subregion}),Object(h.jsx)(f.a,{children:n.capital?n.capital:"N/A"}),Object(h.jsx)(f.a,{children:n.area?n.area.toLocaleString():"N/A"}),Object(h.jsx)(f.a,{children:n.population?n.population.toLocaleString():"N/A"})]},n._id)},x=t(175),C=function(e){var n=e.headCell,t=e.orderBy,r=e.order,a=e.createSortHandler;return Object(h.jsx)(x.a,{active:t===n.id,direction:t===n.id?r:"asc",onClick:a(n.id),children:n.label})},w=t(100),v=t(101),P=[{id:"name",numeric:!1,disablePadding:!0,label:"Country"},{id:"region",numeric:!0,disablePadding:!1,label:"Region"},{id:"subregion",numeric:!0,disablePadding:!1,label:"Subregion"},{id:"capital",numeric:!0,disablePadding:!1,label:"Capital"},{id:"area",numeric:!0,disablePadding:!1,label:"km\xb2"},{id:"population",numeric:!0,disablePadding:!1,label:"Population"}],L=function(e,n,t){return n[t]<e[t]?-1:n[t]>e[t]?1:0},y=function(e,n){return"desc"===e?function(e,t){return L(e,t,n)}:function(e,t){return-L(e,t,n)}},S=function(e,n){var t=e.map((function(e,n){return[e,n]}));return t.sort((function(e,t){var r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t.map((function(e){return e[0]}))},k=Object(l.gql)(r||(r=Object(s.a)(["\n  {\n    Country {\n      _id\n      name\n      area\n      capital\n      population\n      subregion {\n        name\n        region {\n          name\n        }\n      }\n    }\n  }\n"]))),A=function(e){var n=e.searchTerm,t=e.searchField,r=Object(l.useQuery)(k),a=r.data,c=r.loading,u=r.error,s=Object(i.useState)("asc"),x=Object(o.a)(s,2),L=x[0],A=x[1],I=Object(i.useState)("name"),N=Object(o.a)(I,2),E=N[0],B=N[1],F=Object(i.useState)(0),H=Object(o.a)(F,2),_=H[0],J=H[1],R=Object(i.useState)(10),T=Object(o.a)(R,2),U=T[0],q=T[1],M=Object(i.useState)(),Q=Object(o.a)(M,2),z=Q[0],D=Q[1],G=Object(i.useState)(),K=Object(o.a)(G,2),V=K[0],W=K[1],X=function(e){return function(n){!function(e,n){A(E===n&&"asc"===L?"desc":"asc"),B(n)}(0,e)}};return Object(i.useEffect)((function(){a&&a.Country&&D(a.Country.map((function(e){return function(e){var n=e.subregion,t=Object(v.a)(e,["subregion"]);return Object(w.a)({subregion:n?n.name:"N/A",region:n&&n.region?n.region.name:"N/A"},t)}(e)})))}),[a]),Object(i.useEffect)((function(){W(z)}),[z]),console.log(t),Object(i.useEffect)((function(){if(z&&n&&t){switch(t){case"name":W(z.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})));break;case"region":W(z.filter((function(e){return e.region.toLowerCase().includes(n.toLowerCase())})));break;case"subregion":W(z.filter((function(e){return e.subregion.toLowerCase().includes(n.toLowerCase())})));break;case"capital":W(z.filter((function(e){return e.capital.toLowerCase().includes(n.toLowerCase())})));break;case"area":W(z.filter((function(e){return e.area===parseInt(n)})));break;case"population":W(z.filter((function(e){return e.population===parseInt(n)})))}W(z.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})))}}),[n]),c||u?Object(h.jsx)("p",{children:u?u.message:"Loading..."}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b.a,{children:Object(h.jsxs)(d.a,{children:[Object(h.jsx)(j.a,{children:Object(h.jsx)(O.a,{children:P.map((function(e){return Object(h.jsx)(f.a,{children:Object(h.jsx)(C,{headCell:e,orderBy:E,order:L,createSortHandler:function(){return X(e.id)}})},e.id)}))})}),Object(h.jsx)(g.a,{children:V&&S(V,y(L,E)).slice(_*U,_*U+U).map((function(e){return Object(h.jsx)(m,{country:e},e._id)}))})]})}),Object(h.jsx)(p.a,{rowsPerPageOptions:[5,10,25],component:"div",count:V?V.length:0,rowsPerPage:U,page:_,onChangePage:function(e,n){J(n)},onChangeRowsPerPage:function(e){q(parseInt(e.target.value,10)),J(0)}})]})},I=t(174),N=function(e){var n=e.searchUpdate;return Object(h.jsx)(u.a,{children:P.map((function(e){return Object(h.jsx)(I.a,{label:e.label,onChange:function(t){return r=t,a=e.id,void(r&&r.target&&r.target&&n(r.target.value,a));var r,a}})}))})},E=function(){var e=Object(i.useState)(),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(i.useState)(),c=Object(o.a)(a,2),s=c[0],l=c[1];return Object(h.jsxs)(u.a,{container:!0,children:[Object(h.jsx)(u.a,{item:!0,xs:12,children:Object(h.jsx)(N,{searchUpdate:function(e,n){r(e),l(n)}})}),Object(h.jsx)(u.a,{item:!0,xs:12,children:Object(h.jsx)(A,{searchTerm:t,searchField:s})})]})};function B(){return Object(h.jsx)(E,{})}var F=Object(l.createHttpLink)({uri:"https://countries-274616.ew.r.appspot.com/"}),H=new l.ApolloClient({cache:new l.InMemoryCache,link:F});c.a.render(Object(h.jsx)(l.ApolloProvider,{client:H,children:Object(h.jsx)(B,{})}),document.getElementById("root"))}},[[126,1,2]]]);
//# sourceMappingURL=main.9f4f8a6a.chunk.js.map